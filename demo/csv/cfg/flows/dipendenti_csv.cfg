# ═══════════════════════════════════════════════════════════════════════════════
# Data Quality Framework - Configurazione Flusso
# ═══════════════════════════════════════════════════════════════════════════════
#
# AUTORE: Alberto Robetti
# CREAZIONE: 25/10/2025
# ULTIMO AGGIORNAMENTO: 13/11/2025
# VERSIONE: 1.0.0
# FLUSSO: DIPENDENTI_CSV
#
# ═══════════════════════════════════════════════════════════════════════════════
# DESCRIZIONE
# ═══════════════════════════════════════════════════════════════════════════════
# Configurazione flusso per validazione anagrafica dipendenti in formato CSV.
# File delimitato da virgola con header, encoding UTF-8.
#
# Validazioni implementate:
# - Matricola: Formato DIPxxxxx (obbligatorio, univoco)
# - Nome/Cognome: Lunghezza 2-50 caratteri, pattern alfabetico
# - Email: Formato email valido
# - Telefono: Formato italiano +39xxxxxxxxxx o 0xxxxxxxxx
# - Data assunzione: Formato YYYY-MM-DD, range valido
# - Stipendio: Numerico positivo, range 15000-150000
# - Reparto: Lista valori ammessi (IT, HR, SALES, OPERATIONS, ADMIN)
#
# ═══════════════════════════════════════════════════════════════════════════════
# STRUTTURA FILE
# ═══════════════════════════════════════════════════════════════════════════════
# 1. FILE INPUT/OUTPUT: Pattern file, directory elaborazione
# 2. FORMATO E ENCODING: Tipo file, codifica caratteri
# 3. PARAMETRI CSV: Separatori, delimitatori, header
# 4. LOGGING: Livelli dettaglio, abilitazione trace
# 5. PATTERN MATCHING: Selezione file multipli (opzionale)
#
# ═══════════════════════════════════════════════════════════════════════════════
# PARAMETRI OBBLIGATORI
# ═══════════════════════════════════════════════════════════════════════════════
#
# DQ_DIR_TO_SCAN
#   Directory contenente file da elaborare (scansione automatica).
#   Formato: Path assoluto terminante con \
#   Esempio: C:\DataQualityFramework\demo\csv\input\pending\
#
# DQ_FILE_TO_WORK
#   Pattern nome file da processare (supporta wildcard * e ?).
#   * = Qualsiasi sequenza caratteri
#   ? = Singolo carattere qualsiasi
#   Esempio: dipendenti_csv_*.csv elabora dipendenti_csv_20251101.csv, dipendenti_csv_20251102.csv
#
# DQ_FILE_TRACCIATO
#   Path file layout CSV contenente definizione campi e regole validazione.
#   Colonne richieste: Indice, NomeAttributo, TipoDato, Obbligatorio, Lunghezza,
#                      Pattern, ValoriAmmessi, FunzioneCustom
#   Formato: Path assoluto file .csv
#   Esempio: C:\DataQualityFramework\demo\csv\cfg\layouts\dipendenti_csv_layout.csv
#
# OUTPUT_DIR_VALID
#   Directory destinazione file con record validi (suffisso .ok).
#   Contiene solo righe che hanno superato tutte le validazioni.
#   Formato: Path assoluto terminante con \
#
# OUTPUT_DIR_ERROR
#   Directory destinazione file con record errati (suffisso .ko).
#   Contiene righe con almeno un errore validazione + colonna codici errore.
#   Formato: Path assoluto terminante con \
#
# OUTPUT_DIR_REPORTS
#   Directory destinazione file anagrafica codici errore (suffisso .codici).
#   Contiene lista univoca codici errore rilevati con contatori occorrenze.
#   Formato: Path assoluto terminante con \
#
# OUTPUT_DIR_STATS
#   Directory destinazione file report statistiche (suffisso .stats).
#   Contiene statistiche dettagliate: totali record, validi, errori, qualita dati.
#   Formato: Path assoluto terminante con \
#
# FILE_ENCODING
#   Encoding caratteri file input e output.
#   Valori comuni: utf-8, iso-8859-1, cp1252, latin1
#   Esempio: utf-8
#
# ═══════════════════════════════════════════════════════════════════════════════
# PARAMETRI OPZIONALI
# ═══════════════════════════════════════════════════════════════════════════════
#
# FILE_FORMAT (default: CSV)
#   Formato file input: CSV (delimitato) o FIXED (posizionale).
#   CSV = Campi separati da delimitatore
#   FIXED = Campi a posizione fissa (start/length da layout)
#
# CSV_FIELD_SEPARATOR (default: ,)
#   Carattere separatore campi nel file CSV.
#   Esempi: , (virgola), ; (punto e virgola), | (pipe), \t (tab)
#
# CSV_TEXT_QUALIFIER (default: ")
#   Carattere delimitatore valori testuali contenenti separatore.
#   Esempi: " (doppio apice), ' (apice singolo)
#   Utilizzo: "Rossi, Mario",30 protegge la virgola nel cognome
#
# CSV_SKIP_HEADER_ROWS (default: 1)
#   Numero righe header da saltare all'inizio file.
#   0 = Nessun header, file inizia con dati
#   1 = Prima riga e header (caso piu comune)
#   2+ = Header multipli da ignorare
#
# ERROR_CODES_SEPARATOR (default: |)
#   Separatore codici errore nella colonna aggiunta ai file .ko.
#   IMPORTANTE: Deve essere DIVERSO da CSV_FIELD_SEPARATOR.
#   Esempi: | (pipe), ~ (tilde), ; (punto e virgola)
#   Utilizzo: Se campo ha 3 errori, colonna contiene E001|E002|E003
#
# LOG_LEVEL (default: INFO)
#   Livello dettaglio logging validazione.
#   Valori: TRACE | DEBUG | DEBUG2 | DEBUG3 | INFO | WARNING | ERROR
#   TRACE = Log ogni singola validazione campo
#   DEBUG3 = Dettaglio operazioni principali
#   INFO = Solo informazioni essenziali
#
# DQ_ENABLE_FIELD_LOGGING (default: true)
#   Abilita logging validazione campo per campo.
#   true = Log dettagliato ogni attributo (verbose)
#   false = Log solo a livello riga
#
# DQ_ENABLE_ROW_LOGGING (default: true)
#   Abilita logging elaborazione riga per riga.
#   true = Log ogni record (verbose)
#   false = Log solo statistiche finali
#
# SORT_KEYS (default: nessuno)
#   Criteri ordinamento file multipli trovati da pattern matching.
#   Formato: nome[start:length:tipo:order]
#   tipo: numero | stringa
#   order: asc | desc
#   Esempio: nome[17:8:numero:desc] ordina per timestamp YYYYMMDD decrescente
#
# PROCESS_WHICH (default: last)
#   Strategia selezione file da elaborare dopo ordinamento.
#   first = Elabora solo primo file (es: piu recente se sort desc)
#   last = Elabora solo ultimo file (es: piu vecchio se sort desc)
#   all = Elabora tutti file trovati in sequenza
#
# PROCESSO_NOME (default: nome flusso)
#   Nome descrittivo processo per log e report.
#
# PROCESSO_VERSIONE (default: 1.0.0)
#   Versione processo per tracciamento evolutivo.
#
# PROCESSO_DESCRIZIONE (default: vuoto)
#   Descrizione estesa finalita e logica processo.
#
# ═══════════════════════════════════════════════════════════════════════════════

[FLUSSO]

# ═══════════════════════════════════════════════════════════════════════════════
# SEZIONE 1: FILE INPUT/OUTPUT (obbligatori)
# ═══════════════════════════════════════════════════════════════════════════════

# --- INPUT PATTERN MATCHING ---
DQ_DIR_TO_SCAN=C:\DataQualityFramework\demo\csv\input\pending
DQ_FILE_TO_WORK=dipendenti_csv_*.csv
DQ_FILE_TRACCIATO=C:\DataQualityFramework\demo\csv\cfg\layouts\dipendenti_csv_layout.csv

# --- OUTPUT DIRECTORIES (v2.2) ---
OUTPUT_DIR_VALID=C:\DataQualityFramework\demo\csv\output\success
OUTPUT_DIR_ERROR=C:\DataQualityFramework\demo\csv\output\error
OUTPUT_DIR_REPORTS=C:\DataQualityFramework\demo\csv\output\report
OUTPUT_DIR_STATS=C:\DataQualityFramework\demo\csv\output\statistics

# ═══════════════════════════════════════════════════════════════════════════════
# SEZIONE 2: FORMATO FILE E ENCODING
# ═══════════════════════════════════════════════════════════════════════════════

# Formato del file input (default: CSV se non specificato)
# FILE_FORMAT=CSV

# Encoding del file
FILE_ENCODING=utf-8

# ═══════════════════════════════════════════════════════════════════════════════
# SEZIONE 3: PARAMETRI CSV
# ═══════════════════════════════════════════════════════════════════════════════

# Separatore campi CSV (separa i campi tra loro)
# Esempio: nome,cognome,età → virgola separa 3 campi
CSV_FIELD_SEPARATOR=,

# Delimitatore valori testuali (racchiude valori che contengono il separatore)
# Esempio: "Rossi, Mario",30 → le virgolette proteggono la virgola nel nome
CSV_TEXT_QUALIFIER="

# Numero di righe header da saltare
CSV_SKIP_HEADER_ROWS=1

# Separatore tra codici errore nella colonna DQ_ERROR_CODES dei file di scarto
# IMPORTANTE: Deve essere DIVERSO da CSV_FIELD_SEPARATOR per evitare collisioni
# Esempio: se CSV_FIELD_SEPARATOR=, usa | oppure ; oppure ~
# Default: | (pipe)
ERROR_CODES_SEPARATOR=|

# ═══════════════════════════════════════════════════════════════════════════════
# SEZIONE 4: LOGGING
# ═══════════════════════════════════════════════════════════════════════════════

LOG_LEVEL=DEBUG3
DQ_ENABLE_FIELD_LOGGING=true
DQ_ENABLE_ROW_LOGGING=true

# ═══════════════════════════════════════════════════════════════════════════════
# SEZIONE 5: PATTERN MATCHING & OUTPUT NAMING (opzionale)
# ═══════════════════════════════════════════════════════════════════════════════

# Ordinamento per data nel nome file (YYYYMMDD alla posizione 17)
SORT_KEYS=nome[17:8:numero:desc]

# Pattern matching: elabora solo il primo file (più recente)
PROCESS_WHICH=first

# ═══════════════════════════════════════════════════════════════════════════════
# FINE CONFIGURAZIONE
# ═══════════════════════════════════════════════════════════════════════════════
